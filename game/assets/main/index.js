System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts"],(function(e){var o,u,i,n,t,r,s,c,a,d,l;return{setters:[function(e){o=e.createClass,u=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){n=e.cclegacy,t=e._decorator,r=e.AudioSource,s=e.AudioClip,c=e.resources,a=e.Node,d=e.director},function(e){l=e.WaitForSeconds}],execute:function(){var p,m;n._RF.push({},"6013aO/HDBFwLx6nr8rngDc","AudioManager",void 0);var f=t.ccclass;t.property,e("AudioManager",f("AudioManager")(((m=function(){function e(){this._musicAudioSource=void 0,this._soundAudioSourceList=[];var e=new a;e.name="AudioMgr",d.getScene().addChild(e),this._musicAudioSource=e.addComponent(r)}var n=e.prototype;return n.prepare=function(){var e=u(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:if(!e.sent.active){e.next=6;break}return e.abrupt("return");case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return console.log("Maybe can't Play Audio, please agree audio permissions in setting."),e.abrupt("return");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),n.playOneShot=function(){var e=u(i().mark((function e(o,u,n){var t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===u&&(u=1),void 0===n&&(n=0),!(o instanceof s)){e.next=9;break}if(!(n>0)){e.next=6;break}return e.next=6,l(n);case 6:this.playSound(o,u),e.next=10;break;case 9:c.load(o,(function(e,o){e?console.log(e):t.playSound(o,u)}));case 10:case"end":return e.stop()}}),e,this)})));return function(o,u,i){return e.apply(this,arguments)}}(),n.playSound=function(e,o){var u=this._soundAudioSourceList.find((function(e){return!e.playing}));if(null==u){var i=this._musicAudioSource.node.addComponent(r);i.playOneShot(e,o),this._soundAudioSourceList.push(i)}else u.playOneShot(e,o)},n.playMusic=function(e,o){var u=this;void 0===o&&(o=1),e instanceof s?(this._musicAudioSource.stop(),this._musicAudioSource.clip=e,this._musicAudioSource.play(),this._musicAudioSource.volume=o,this._musicAudioSource.loop=!0):c.load(e,(function(e,i){e?console.log(e):(u._musicAudioSource.stop(),u._musicAudioSource.clip=i,u._musicAudioSource.play(),u._musicAudioSource.volume=o,u._musicAudioSource.loop=!0)}))},n.sestMusicVolumeSmaller=function(){this._musicAudioSource.volume=.5},n.sestMusicVolumeRevert=function(){this._musicAudioSource.volume=1},n.stopMusic=function(){this._musicAudioSource.stop()},n.pauseMusic=function(){this._musicAudioSource.pause()},n.resumeMusic=function(){this._musicAudioSource.play()},o(e,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new e),this._inst}}]),e}())._inst=void 0,p=m))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./SourceManager.ts","./AudioManager.ts","./CardManager.ts","./TableManager.ts","./CharacterManager.ts","./PlayerInfo.ts","./DataManager.ts"],(function(e){var t,n,r,a,i,s,o,u,c,l,h,d,p,f,_,y,C,m,g,b,k,M,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.createClass,a=e.initializerDefineProperty,i=e.assertThisInitialized,s=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,c=e._decorator,l=e.Button,h=e.Sprite,d=e.Animation,p=e.sp,f=e.Component},function(e){_=e.WaitForSeconds},function(e){y=e.SourceManager,C=e.WinnerType},function(e){m=e.AudioManager},function(e){g=e.CardManager},function(e){b=e.TableManager},function(e){k=e.CharacterManager},function(e){M=e.PlayerInfo},function(e){v=e.DataManager}],execute:function(){var x,I,w,S,A,D,T,H,E,P,B,R,z,F,L,N,W,Y,O,V,G,U,j,X,q,J,K,Q,Z,$,ee;u._RF.push({},"b3be2CF3eROerj9ify40PGS","BattleSystem",void 0);var te=c.ccclass,ne=c.property;e("BattleSystem",(x=te("BattleSystem"),I=ne({type:g,visible:!0}),w=ne({type:g,visible:!0}),S=ne({type:b,visible:!0}),A=ne({type:k,visible:!0}),D=ne({type:k,visible:!0}),T=ne({type:v,visible:!0}),H=ne({type:M,visible:!0}),E=ne({type:M,visible:!0}),P=ne({type:l,visible:!0}),B=ne({type:h,visible:!0}),R=ne({type:h,visible:!0}),z=ne({type:d,visible:!0}),F=ne({type:d,visible:!0}),L=ne({type:p.Skeleton,visible:!0}),x((Y=t((W=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,a(t,"_playerCardManager",Y,i(t)),a(t,"_enemyCardManager",O,i(t)),a(t,"_tableManager",V,i(t)),a(t,"_playerCharacter",G,i(t)),a(t,"_enemyCharacter",U,i(t)),a(t,"_dataManager",j,i(t)),a(t,"_playerInfo",X,i(t)),a(t,"_enemyInfo",q,i(t)),a(t,"_endButton",J,i(t)),a(t,"_roundInfoSprite",K,i(t)),a(t,"_roundHeaderSprite",Q,i(t)),a(t,"_roundHeaderAnim",Z,i(t)),a(t,"_revealAnim",$,i(t)),a(t,"_skillSpine",ee,i(t)),t._round=0,t._MAX_ROUND=5,t.finished=!1,t}n(t,e);var u=t.prototype;return u.start=function(){this.init()},u.init=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.finished=!1,this._round=1,this._endButton.node.active=!0,this._endButton.interactable=!1,this._roundInfoSprite.node.active=!1,this._roundHeaderAnim.node.active=!1,this._revealAnim.node.active=!1,this._skillSpine.node.active=!1,this.setListener();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.onClickTest=function(){},u.resetAll=function(){this._endButton.node.active=!0,this._endButton.interactable=!1,this._roundInfoSprite.node.active=!1,this._roundHeaderAnim.node.active=!1,this._revealAnim.node.active=!1,this._skillSpine.node.active=!1,this._tableManager.init(),this._playerCardManager.clearCards(),this._enemyCardManager.clearCards(),this._playerCharacter.playIdle(),this._enemyCharacter.playIdle()},u.setListener=function(){y.Instance.eventTarget.on("drag_start",this.onCardDragStart.bind(this)),y.Instance.eventTarget.on("drag_end",this.onCardDragEnd.bind(this))},u.prepare=function(){this.finished=!1,this._round=1,this.nextCharacter(!0),this.nextCharacter(!1)},u.startGame=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showRoundHeader();case 2:return e.next=4,this.showCards();case 4:return e.next=6,this.waitForPlayerMoveCards();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.process=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showRoundHeader();case 2:return e.next=4,this.addHandCards();case 4:return e.next=6,this.waitForPlayerMoveCards();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.showRoundHeader=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._roundInfoSprite.spriteFrame=y.Instance.roundInfoSpriteFrameList[this._round-1],this._roundInfoSprite.node.active=!0,this._roundHeaderSprite.spriteFrame=y.Instance.roundHeaderSpriteFrameList[this._round-1],this._roundHeaderAnim.node.active=!0,this._roundHeaderAnim.play(),e.next=7,_(this._roundHeaderAnim.defaultClip.duration);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.showCards=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._playerCardManager.showCards(),this._playerInfo.setCardDeckCount(this._playerCardManager.cardDeckCount),this._enemyCardManager.showCards(!0),this._enemyInfo.setCardDeckCount(this._enemyCardManager.cardDeckCount),this._enemyCardManager.doMoveIn(),e.next=7,this._playerCardManager.doMoveIn();case 7:return m.inst.playOneShot(y.Instance.getAudioClip("show_cards")),e.next=10,_(.5);case 10:return e.next=12,this._playerCardManager.flopCards();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.addHandCards=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.inst.playOneShot(y.Instance.getAudioClip("show_cards")),this._playerCardManager.addHandCards(!1,!0),this._playerInfo.setCardDeckCount(this._playerCardManager.cardDeckCount),e.next=5,_(.2);case 5:return this._enemyCardManager.addHandCards(!0,!1),e.next=8,this._enemyInfo.setCardDeckCount(this._enemyCardManager.cardDeckCount);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.waitForPlayerMoveCards=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._playerCardManager.setCanDropCard(),this._tableManager.waitForPlayeMoved();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.onCardDragStart=function(){this._endButton.interactable=!1},u.onCardDragEnd=function(){var e=this._playerCardManager.checkNoMoreHandCard();this._endButton.interactable=e},u.onClickEndTurn=function(){m.inst.playOneShot(y.Instance.getAudioClip("click_button")),this._endButton.node.active=!1,this._playerCardManager.stopTouchDragCards(),this.afterEndTurn()},u.afterEndTurn=function(){var e=s(o().mark((function e(){var t,n,r,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._tableManager.getEnemyCardSitePos(),this._enemyCardManager.pushAllCards(t),this._revealAnim.node.active=!0,this._revealAnim.play(),e.next=6,_(this._revealAnim.defaultClip.duration);case 6:this._revealAnim.node.active=!1,n=0;case 8:if(!(n<this._tableManager.fightBoxCount)){e.next=54;break}return e.next=11,this._enemyCardManager.flopGroupCards(n);case 11:return r=this._tableManager.checkBoxType(n),e.next=14,this.checkWinner(n,r);case 14:return a=e.sent,e.next=17,this.showToken(n,a,r);case 17:if(a!=C.PLAYER){e.next=34;break}if(!this._playerInfo.checkSkillTokenBeMet()){e.next=32;break}return this._playerInfo.costSkillToken(),e.next=22,this.showSkill(this._playerCharacter,this._enemyCharacter);case 22:if(i=e.sent,this._enemyInfo.changeLifeValue(-i),!this._enemyInfo.isNoHp){e.next=31;break}return e.next=27,this.showDead(this._enemyCharacter);case 27:return this.finished=!0,e.abrupt("return");case 31:this.nextCharacter(!0);case 32:e.next=49;break;case 34:if(a!=C.ENEMY){e.next=49;break}if(!this._enemyInfo.checkSkillTokenBeMet()){e.next=49;break}return this._enemyInfo.costSkillToken(),e.next=39,this.showSkill(this._enemyCharacter,this._playerCharacter);case 39:if(s=e.sent,this._playerInfo.changeLifeValue(-s),!this._playerInfo.isNoHp){e.next=48;break}return e.next=44,this.showDead(this._playerCharacter);case 44:return this.finished=!0,e.abrupt("return");case 48:this.nextCharacter(!1);case 49:return e.next=51,_(.5);case 51:n++,e.next=8;break;case 54:if(!(this._round>=this._MAX_ROUND)){e.next=57;break}return this.finished=!0,e.abrupt("return");case 57:return e.next=59,_(.5);case 59:this.nextRound();case 60:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.nextRound=function(){this._endButton.node.active=!0,this._endButton.interactable=!1,this._roundHeaderAnim.node.active=!1,this._revealAnim.node.active=!1,this._skillSpine.node.active=!1,this._playerCardManager.hideAllUsedCards(),this._enemyCardManager.hideAllUsedCards(),this._playerCharacter.playIdle(),this._enemyCharacter.playIdle(),this._tableManager.reset(),this._round+=1,this.process()},u.checkWinner=function(){var e=s(o().mark((function e(t,n){var r,a,i,s,u,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._playerCardManager.getSameGroupCardPoints(t),a=this._enemyCardManager.getSameGroupCardPoints(t),i=C.DRAW,r>a?i=C.PLAYER:r<a&&(i=C.ENEMY),e.next=6,this._tableManager.setBoxPoints(t,i,r,a);case 6:if(i!=C.DRAW){e.next=39;break}return e.next=9,_(.5);case 9:return this._playerCardManager.showCompareCard(!1,this._playerInfo.cardDeckPosition),this._enemyCardManager.showCompareCard(!0,this._enemyInfo.cardDeckPosition),this._playerInfo.setCardDeckCount(this._playerCardManager.cardDeckCount),this._enemyInfo.setCardDeckCount(this._enemyCardManager.cardDeckCount),this._enemyCardManager.moveAndFlopCompareCard(),e.next=16,this._playerCardManager.moveAndFlopCompareCard();case 16:if(s=this._enemyCardManager.compareCardPoint,!((u=this._playerCardManager.compareCardPoint)>s)){e.next=27;break}return i=C.PLAYER,e.next=22,this._playerCardManager.playWinCompareCard();case 22:return c=e.sent,e.next=25,this._tableManager.doTweenCompareWinIcon(n,c);case 25:e.next=34;break;case 27:if(!(u<s)){e.next=34;break}return i=C.ENEMY,e.next=31,this._enemyCardManager.playWinCompareCard();case 31:return l=e.sent,e.next=34,this._tableManager.doTweenCompareWinIcon(n,l);case 34:return this._enemyCardManager.playHideCompareCard(),e.next=37,this._playerCardManager.playHideCompareCard();case 37:e.next=41;break;case 39:return e.next=41,_(1);case 41:return e.abrupt("return",i);case 42:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),u.showToken=function(){var e=s(o().mark((function e(t,n,r){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._tableManager.showWinnerIconAndToken(t,n,r);case 2:return e.next=4,_(.25);case 4:if(a=this._tableManager.checkTargetBoxTypeIsVs(t),n!=C.PLAYER){e.next=20;break}if(!a){e.next=15;break}if(!this._enemyInfo.checkTokenCount(r,1)){e.next=12;break}this._enemyInfo.addToken(r,-1),this._playerInfo.addToken(r,1),e.next=13;break;case 12:return e.abrupt("return");case 13:e.next=16;break;case 15:this._playerInfo.addToken(r,1);case 16:return e.next=18,this._playerInfo.playChangeTokenValueAnim(r);case 18:e.next=33;break;case 20:if(n!=C.ENEMY){e.next=33;break}if(!a){e.next=30;break}if(!this._playerInfo.checkTokenCount(r,1)){e.next=27;break}this._enemyInfo.addToken(r,1),this._playerInfo.addToken(r,-1),e.next=28;break;case 27:return e.abrupt("return");case 28:e.next=31;break;case 30:this._enemyInfo.addToken(r,1);case 31:return e.next=33,this._enemyInfo.playChangeTokenValueAnim(r);case 33:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),u.showSkill=function(){var e=s(o().mark((function e(t,n){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,this._skillSpine.skeletonData=this._dataManager.getSkillSkeletonData(r),e.next=4,_(.2);case 4:return t.playAttack(),e.next=7,_(1);case 7:return m.inst.sestMusicVolumeSmaller(),m.inst.playOneShot(this._dataManager.getSkillAudio(r)),this._skillSpine.node.active=!0,a=this._skillSpine.setAnimation(0,"cutin",!1),e.next=13,_(a.animation.duration);case 13:return this._skillSpine.node.active=!1,m.inst.sestMusicVolumeRevert(),e.next=17,n.playAttcked();case 17:return e.abrupt("return",this._dataManager.getSkillDamage(r));case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),u.showDead=function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.playDead(),m.inst.playOneShot(y.Instance.getAudioClip("dead"),1,1),e.next=4,_(t.animDuration);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u.setCharacter=function(e,t){var n=e?this._playerCharacter:this._enemyCharacter,r=e?this._playerInfo:this._enemyInfo,a=this._dataManager.getOtherHeadIconSprite(e),i=this._dataManager.getOtherHeadIconColor(e);r.setHeadIcon(a[0],a[1],i[0],i[1]);var s=this._dataManager.getSkillTokens(t);r.setSkillTokenCount(s[0],s[1],s[2]),n.setCharacter(t,this._dataManager.getNameSprite(t),this._dataManager.getCharacterSpine(t))},u.nextCharacter=function(e){var t=-1;t=e?this._dataManager.nextPlayerCharacter():this._dataManager.nextEnemyCharacter(),this.setCharacter(e,t)},r(t,[{key:"finalWinner",get:function(){return this._playerInfo.isNoHp?C.ENEMY:this._enemyInfo.isNoHp?C.PLAYER:this._enemyInfo.hp==this._playerInfo.hp?C.DRAW:this._enemyInfo.hp>this._playerInfo.hp?C.ENEMY:this._enemyInfo.hp<this._playerInfo.hp?C.PLAYER:C.DRAW}}]),t}(f)).prototype,"_playerCardManager",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(W.prototype,"_enemyCardManager",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(W.prototype,"_tableManager",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(W.prototype,"_playerCharacter",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(W.prototype,"_enemyCharacter",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(W.prototype,"_dataManager",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(W.prototype,"_playerInfo",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(W.prototype,"_enemyInfo",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(W.prototype,"_endButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(W.prototype,"_roundInfoSprite",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(W.prototype,"_roundHeaderSprite",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(W.prototype,"_roundHeaderAnim",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(W.prototype,"_revealAnim",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(W.prototype,"_skillSpine",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=W))||N));u._RF.pop()}}}));

System.register("chunks:///_virtual/Card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./FightBoxSite.ts","./SourceManager.ts","./AudioManager.ts","./CardManager.ts"],(function(t){var i,e,n,s,o,a,r,c,h,l,d,u,g,p,f,_,C,T,S,v,D;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.createClass,s=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){c=t.cclegacy,h=t._decorator,l=t.Sprite,d=t.BoxCollider2D,u=t.Vec3,g=t.Node,p=t.Contact2DType,f=t.Component,_=t.tween},function(t){C=t.WaitForSeconds},function(t){T=t.FightBoxSite},function(t){S=t.SourceManager},function(t){v=t.AudioManager},function(t){D=t.CardManager}],execute:function(){var y,b,x,B,L,E,M;c._RF.push({},"f4df63xfCtElKJ15uITEXq7","Card",void 0);var A=h.ccclass,w=h.property;t("Card",(y=A("Card"),b=w({type:l,visible:!0}),x=w({type:d,visible:!0}),y((E=i((L=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(i=t.call.apply(t,[this].concat(n))||this).point=0,i.tableGroup=-99,s(i,"_sprite",E,o(i)),s(i,"_collider",M,o(i)),i._isDragable=!0,i._isFlip=!1,i.isDragStart=!1,i._isDraging=!1,i._contactBoxList=[],i}e(i,t);var c=i.prototype;return c.onLoad=function(){this._isDragable=!1,this.isDragStart=!1,this._isDraging=!1,this.setColliderStatus(!1)},c.resetCard=function(){this.tableGroup=-99,this.point=0,this.setScale(1),this._sprite.spriteFrame=null,this._contactBoxList=[],this._isDragable=!1,this.isDragStart=!1,this._isDraging=!1,this.setColliderStatus(!1)},c.changeSprite=function(t){this._sprite.spriteFrame=t},c.setHandAngleAndPos=function(t,i,e){this._isFlip=e,this.setAngle(t),this.node.setPosition(i)},c.setScale=function(t){this._isFlip?this.node.setScale(new u(-t,-t,t)):this.node.setScale(new u(t,t,t))},c.setAngle=function(t){this._isFlip?this.node.angle=-t:this.node.angle=t},c.setHandMode=function(){this.setScale(1),this.tableGroup=-1,this.setColliderStatus(!1)},c.setMoveMode=function(){this.setAngle(0),this.setScale(.6),this.setColliderStatus(!0),this.node.setSiblingIndex(D.HANDCARD_COUNT-1)},c.setPushMode=function(t,i){this.tableGroup=t,this.setAngle(0),this.setScale(.6),this.node.setWorldPosition(i),this.setColliderStatus(!1)},c.flop=function(){var t=a(r().mark((function t(i,e){var n,s,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),n=this.node.scale.x,s=n,o=.2,v.inst.playOneShot(S.Instance.getAudioClip("flop_card")),_(this.node).to(o,{scale:new u(0,n,this.node.scale.z)}).start(),t.next=8,C(o);case 8:return this.changeSprite(i),e&&(s=Math.abs(this.node.scale.y),this.node.scale.set(0,s)),_(this.node).to(o,{scale:new u(s,s,this.node.scale.z)}).start(),t.next=13,C(o);case 13:case"end":return t.stop()}}),t,this)})));return function(i,e){return t.apply(this,arguments)}}(),c.setTouchEvent=function(){this.node.on(g.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(g.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(g.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(g.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},c.clearTouchEvent=function(){this.node.targetOff(this.node)},c.setColliderStatus=function(t){this._collider.enabled=t,t?(this._collider.on(p.BEGIN_CONTACT,this.onContactBegan,this),this._collider.on(p.END_CONTACT,this.onContactEnd,this)):(this._collider.off(p.BEGIN_CONTACT,this.onContactBegan,this),this._collider.off(p.END_CONTACT,this.onContactEnd,this))},c.onTouchBegan=function(t){if(this._isDragable&&!this.isDragStart&&this.enabledInHierarchy){this.isDragStart=!0,this.setMoveMode();var i=t.getUILocation();this.node.setWorldPosition(new u(i.x,i.y,0)),S.Instance.eventTarget.emit("drag_start")}},c.onTouchMove=function(t){if(this._isDragable&&this.isDragStart&&this.enabledInHierarchy){var i=t.getUIStartLocation(),e=t.getUILocation(),n=t.getUILocation();n.subtract(i),n.lengthSqr()>20&&(this.node.setWorldPosition(new u(e.x,e.y,0)),this._isDraging=!0)}},c.onTouchEnded=function(t){this.stopDrag(t)},c.onTouchCancel=function(t){this.stopDrag(t)},c.stopDrag=function(t){if(this._isDragable&&this.isDragStart&&this.enabledInHierarchy){if(this.isDragStart=!1,this._isDraging=!1,this._contactBoxList.length>0){this._contactBoxList.length>1&&this._contactBoxList.splice(1,this._contactBoxList.length-1);var i=this._contactBoxList[0];i.cardPushed(this.point),this.setPushMode(i.group,i.node.worldPosition),v.inst.playOneShot(S.Instance.getAudioClip("push_card"))}else this.setHandMode();S.Instance.eventTarget.emit("drag_end")}},c.onContactBegan=function(t,i,e){if(0!=i.tag){var n=i.getComponent(T);if(!(n.point>-1)){if(this._contactBoxList.length>0)if(u.distance(this.node.worldPosition,this._contactBoxList[0].node.worldPosition)>u.distance(this.node.worldPosition,n.node.worldPosition))return void this._contactBoxList.unshift(n);this._contactBoxList.push(n)}}},c.onContactEnd=function(t,i,e){if(0!=i.tag){var n=i.getComponent(T);if(this._isDraging&&this._contactBoxList.length>0){var s=this._contactBoxList.findIndex((function(t){return t.name==n.name&&t.group==n.group}));if(s>-1){this._contactBoxList[s].waitForPlayerMoveCard();this._contactBoxList.splice(s,1)}}}},n(i,[{key:"isDragable",set:function(t){this._isDragable=t,this.clearTouchEvent(),t&&this.setTouchEvent()}}]),i}(f)).prototype,"_sprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(L.prototype,"_collider",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=L))||B));c._RF.pop()}}}));

System.register("chunks:///_virtual/CardManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Card.ts","./SourceManager.ts","./Common.ts"],(function(t){var r,e,n,a,s,i,o,c,d,u,h,p,l,f,C,g,_,v,m,b;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,a=t.createClass,s=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){d=t.cclegacy,u=t._decorator,h=t.Node,p=t.Vec3,l=t.log,f=t.instantiate,C=t.Component,g=t.tween},function(t){_=t.Card},function(t){v=t.SourceManager},function(t){m=t.shuffle,b=t.WaitForSeconds}],execute:function(){var L,y,I,w,x,P,A,D,S,H;d._RF.push({},"73bdaFz0gJNZ4Cl5RT39IqS","CardManager",void 0);var k=u.ccclass,N=u.property;t("CardManager",(L=k("CardManager"),y=N({type:_,visible:!0}),I=N({type:h,visible:!0}),w=N({type:h,visible:!0}),L(((H=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(r=t.call.apply(t,[this].concat(n))||this)._allCardIdList=[],r._cardsList=[],s(r,"_compareCard",A,i(r)),s(r,"_handCardCenter",D,i(r)),s(r,"_compareCardPosNode",S,i(r)),r}e(r,t);var d=r.prototype;return d.init=function(t){this._allCardIdList=t,m(this._allCardIdList),this._compareCard.node.active=!1},d.clearCards=function(){for(;this._cardsList.length>0;){var t=this._cardsList.pop();t.resetCard(),t.node.removeFromParent(),t.node.destroy()}this._compareCard.node.active=!1},d.hideAllUsedCards=function(){for(var t=0;t<this._cardsList.length;t++)this._cardsList[t].tableGroup>-1&&(this._cardsList[t].node.active=!1)},d.showCards=function(t){void 0===t&&(t=!1);for(var e=r.HANDCARD_COUNT/2-.5,n=0;n<r.HANDCARD_COUNT;n++){var a=this._allCardIdList.pop();this.setCard(n,a,e,t,!1,!0)}},d.setCard=function(t,r,e,n,a,s){var i,o=v.Instance.backSpriteFrame,c=v.Instance.frontSpriteFrameList,d=this._handCardCenter.position.y;t>=this._cardsList.length?(i=this.createCard(),this._cardsList.push(i)):(i=this._cardsList[t]).node.active=!0,i.point=r,i.tableGroup=-1,a?i.changeSprite(c[r-1]):i.changeSprite(o);var u=e-t,h=this.getAngleX(u),l=new p(this.getPosX(u),d,0);i.setHandAngleAndPos(h,l,n),i.setHandMode(),i.node.position=s?new p(l.x,this.getInitY(),0):l},d.addHandCards=function(){var t=o(c().mark((function t(e,n){var a,s,i,o,d,u,h,l,f,C,_;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(void 0===e&&(e=!1),a=[],s=0;s<this._cardsList.length;s++)this._cardsList[s].tableGroup<0&&a.push(this._cardsList[s].point),this._cardsList[s].resetCard();for(i=a.length,o=Math.max(0,i/2-.5),d=0;d<a.length;d++)u=a[d],this.setCard(d,u,o,e,n,!1);a=null,h=.32,l=this._handCardCenter.position.y,f=i;case 10:if(!(f<r.HANDCARD_COUNT)){t.next=22;break}return C=this._allCardIdList.pop(),this.setCard(f,C,f,e,n,!1),this.sortAddHandPos(),_=new p(this._cardsList[f].node.position.x,this.getInitY(),0),this._cardsList[f].node.setPosition(_),g(this._cardsList[f].node).to(h,{position:new p(_.x,l,0)},{easing:"circOut"}).start(),t.next=19,b(h+.01);case 19:f++,t.next=10;break;case 22:this.sortAddHandPos();case 23:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}(),d.sortAddHandPos=function(){for(var t=this._cardsList.filter((function(t){return-1==t.tableGroup})),r=t.length/2-.5,e=this._handCardCenter.position.y,n=0;n<t.length;n++){var a=r-n,s=this.getAngleX(a),i=new p(this.getPosX(a),e,0);t[n].setHandAngleAndPos(s,i,!1),t[n].node.setSiblingIndex(0),this.node.name.match("Player")&&l(" >>> sortAddHandPos ["+n+"] pos: "+t[n].node.position)}},d.createCard=function(){var t=v.Instance.cardPrefab,r=f(t);return r.setParent(this.node),r.setSiblingIndex(0),r.getComponent(_)},d.sortHandPos=function(){for(var t=this._cardsList.filter((function(t){return!t.isDragStart&&-1==t.tableGroup})),r=t.length/2-.5,e=this._handCardCenter.position.y,n=0;n<t.length;n++){var a=r-n,s=this.getAngleX(a),i=new p(this.getPosX(a),e,0);t[n].setHandAngleAndPos(s,i,!1),t[n].node.setSiblingIndex(0)}},d.getInitY=function(){return 1.5*this._handCardCenter.position.y},d.getAngleX=function(t){return 5*t},d.getPosX=function(t){return 100*-t},d.doMoveIn=function(){var t=o(c().mark((function t(){var r,e,n,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=.32,e=this._handCardCenter.position.y,n=0;case 3:if(!(n<this._cardsList.length)){t.next=11;break}return a=this._cardsList[n].node.position,g(this._cardsList[n].node).to(r,{position:new p(a.x,e,0)},{easing:"circOut"}).start(),t.next=8,b(.1);case 8:n++,t.next=3;break;case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),d.flopCards=function(){var t=o(c().mark((function t(){var r,e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=v.Instance.frontSpriteFrameList,e=0;case 2:if(!(e<this._cardsList.length)){t.next=9;break}return this._cardsList[e].flop(r[this._cardsList[e].point-1]),t.next=6,b(.1);case 6:e++,t.next=2;break;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),d.flopGroupCards=function(){var t=o(c().mark((function t(r){var e,n,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=v.Instance.frontSpriteFrameList,n=this._cardsList.filter((function(t){return t.tableGroup==r})),a=0;a<n.length;a++)n[a].flop(e[n[a].point-1],!0);return t.next=5,b(.5);case 5:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),d.setCanDropCard=function(){for(var t=0;t<this._cardsList.length;t++)this._cardsList[t].isDragable=!0;v.Instance.eventTarget.off("drag_start",this.onCardDragStart.bind(this)),v.Instance.eventTarget.off("drag_end",this.onCardDragEnd.bind(this)),v.Instance.eventTarget.on("drag_start",this.onCardDragStart.bind(this)),v.Instance.eventTarget.on("drag_end",this.onCardDragEnd.bind(this))},d.checkNoMoreHandCard=function(){for(var t=0,r=0;r<this._cardsList.length;r++)-1==this._cardsList[r].tableGroup&&t++;return t<=1},d.pushAllCards=function(t){for(var r=0;r<this._cardsList.length;r++)if(r<t.length){var e=Math.floor(r/2);this._cardsList[r].setPushMode(e,t[r])}this.sortHandPos()},d.onCardDragStart=function(){this.sortHandPos()},d.onCardDragEnd=function(){this.sortHandPos()},d.stopTouchDragCards=function(){for(var t=0;t<this._cardsList.length;t++)this._cardsList[t].isDragable=!1;v.Instance.eventTarget.off("drag_start",this.onCardDragStart.bind(this)),v.Instance.eventTarget.off("drag_end",this.onCardDragEnd.bind(this))},d.getSameGroupCardPoints=function(t){for(var r,e=this._cardsList.filter((function(r){return r.tableGroup==t})),a=0,s=n(e);!(r=s()).done;){a+=r.value.point}return a},d.showCompareCard=function(t,r){var e=this._allCardIdList.pop();null==this._compareCard&&(this._compareCard=this.createCard()),this._compareCard.point=e,this._compareCard.tableGroup=-1,this._compareCard.changeSprite(v.Instance.backSpriteFrame),this._compareCard.node.position=r,this._compareCard.setHandMode(),this._compareCard.node.active=!0},d.moveAndFlopCompareCard=function(){var t=o(c().mark((function t(){var r,e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this._compareCardPosNode.position,.5,g(this._compareCard.node).to(.5,{position:r,scale:new p(1.5,1.5,1.5)},{easing:"cubicInOut"}).start(),t.next=5,b(.5);case 5:return e=v.Instance.frontSpriteFrameList,this._compareCard.flop(e[this._compareCard.point-1],!0),t.next=9,b(1);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),d.playWinCompareCard=function(){var t=o(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return.4,g(this._compareCard.node).by(.4,{scale:new p(1.2,1.2,1.2)},{easing:"cubicInOut"}).by(.4,{scale:new p(-1.2,-1.2,-1.2)},{easing:"quintIn"}).start(),t.next=4,b(.8);case 4:return t.abrupt("return",this._compareCardPosNode.position);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),d.playHideCompareCard=function(){var t=o(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this._compareCard||!this._compareCard.node.active){t.next=6;break}return.25,g(this._compareCard.node).to(.25,{scale:new p(0,0,0)},{easing:"quintIn"}).start(),t.next=5,b(.25);case 5:this._compareCard.node.active=!1;case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a(r,[{key:"cardDeckCount",get:function(){return this._allCardIdList.length}},{key:"compareCardPoint",get:function(){return this._compareCard.point}}]),r}(C)).HANDCARD_COUNT=7,A=r((P=H).prototype,"_compareCard",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=r(P.prototype,"_handCardCenter",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=r(P.prototype,"_compareCardPosNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=P))||x));d._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./SourceManager.ts"],(function(t){var e,n,i,r,a,o,s,c,l,p,u,h,d,_,m,y,f,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.createClass,r=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){c=t.cclegacy,l=t._decorator,p=t.sp,u=t.Sprite,h=t.Node,d=t.Camera,_=t.Vec3,m=t.Component,y=t.tween},function(t){f=t.WaitForSeconds},function(t){k=t.SourceManager}],execute:function(){var v,A,N,g,E,w,T,b,C,S,H;c._RF.push({},"d5f40hlwsNDYoh5s2U2IJ+y","CharacterManager",void 0);var M=l.ccclass,I=l.property;t("CharacterManager",(v=M("CharacterManager"),A=I({type:p.Skeleton,visible:!0}),N=I({type:u,visible:!0}),g=I({type:h,visible:!0}),E=I({visible:!1}),v((b=e((T=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,r(e,"_spine",b,a(e)),r(e,"_nameSprite",C,a(e)),r(e,"_tipHoverNode",S,a(e)),e._idleAnimName="idle",e._idleToAttackAnimName="idleToAttack",e._attackAnimName="attack",e._attackToIdleAnimName="attackToIdle",e._deadAnimName="dead",e._trackEntry=null,r(e,"id",H,a(e)),e._tipNodeHover=!1,e}n(e,t);var c=e.prototype;return c.start=function(){var t=this;this._tipNodeHover=!1,this._tipHoverNode.on(h.EventType.MOUSE_ENTER,(function(e){t._tipNodeHover=!0}),this),this._tipHoverNode.on(h.EventType.MOUSE_MOVE,(function(e){if(t._tipNodeHover){var n=e.getLocation(),i=t.node.parent.getComponentInChildren(d).screenToWorld(new _(n.x,n.y,0));k.Instance.showTip(t.id,i)}}),this),this._tipHoverNode.on(h.EventType.MOUSE_LEAVE,(function(e){t._tipNodeHover=!1,k.Instance.hideTip()}),this)},c.setCharacter=function(t,e,n){this.id=t,this._nameSprite.spriteFrame=e,this._spine.skeletonData=n,this.playIdle()},c.playIdle=function(){this.clearTrackAnim(),this._trackEntry=this._spine.setAnimation(0,this._idleAnimName,!0),this._spine.updateAnimation(0)},c.playAttack=function(){this.clearTrackAnim();for(var t=[this._idleToAttackAnimName,this._attackAnimName,this._attackToIdleAnimName],e=1;e<t.length;e++)this._trackEntry=this._spine.addAnimation(0,t[e],!1);this._trackEntry=this._spine.addAnimation(0,this._idleAnimName,!0),this._spine.updateAnimation(0)},c.playDead=function(){this.clearTrackAnim(),this._trackEntry=this._spine.setAnimation(0,this._deadAnimName,!1),this._spine.updateAnimation(0)},c.playAttcked=function(){var t=o(s().mark((function t(){var e,n,i,r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=this._spine.node.position,n=.05,i=[new _(12,0,0),new _(-24,0,0),new _(22,0,0),new _(-18,0,0),new _(14,0,0),new _(-10,0,0),new _(8,0,0),new _(-6,0,0),new _(4,0,0)],r=y(this._spine.node),a=0;a<i.length;a++)r.by(n,{position:i[a]});return r.to(n,{position:e}),r.start(),t.next=9,f(n*i.length+n);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.clearTrackAnim=function(){null!=this._trackEntry&&(this._spine.clearAnimation(0),this._trackEntry=null)},i(e,[{key:"animDuration",get:function(){return null!=this._trackEntry?this._trackEntry.animation.duration:0}},{key:"isComplete",get:function(){return null==this._trackEntry||this._trackEntry.isComplete()}}]),e}(m)).prototype,"_spine",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(T.prototype,"_nameSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(T.prototype,"_tipHoverNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(T.prototype,"id",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),w=T))||w));c._RF.pop()}}}));

System.register("chunks:///_virtual/Common.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){t({Debug:function(t){},ReleaseAsyncSource:function(){for(var t=0;t<r.length;t++)clearTimeout(r[t]);r=[]},WaitForSeconds:function(t){var e=0;return new Promise((function(n){e=setTimeout(n,1e3*t),r.push(e)}))},WaitForUntil:function(t){return new Promise((function e(n){t()?n():setTimeout((function(t){return e(n)}),400)}))},shuffle:function(t){var e,n=t.length;for(;0!=n;){e=Math.floor(Math.random()*n),n--;var r=[t[e],t[n]];t[n]=r[0],t[e]=r[1]}return t}}),n._RF.push({},"fa161qNcwNASrqXRNdlXWJw","Common",void 0);t("Queue",function(){function t(){this._store=[]}var n=t.prototype;return n.Dequeue=function(){if(this._store.length<=0)return console.error("[Queue] Queue Element Not Exist "),null;var t=this._store[0];return this._store.shift(),t},n.Enqueue=function(t){this._store.push(t)},n.Clear=function(){this._store=[]},e(t,[{key:"Count",get:function(){return this._store.length}}]),t}()),t("Delegate",function(){function t(){this._callbacks=void 0,this._callbacks=[]}var n=t.prototype;return n.Insert=function(t,e){for(var n=!1,r=0;r<this._callbacks.length;r++)this._callbacks[r].func==t&&this._callbacks[r].owner==e&&(n=!0);if(n)return console.error("Registered Error."),console.error(t),void console.error(e);var o={func:t,owner:e};this._callbacks.push(o)},n.Remove=function(t,e){this._callbacks=this._callbacks.filter((function(n){return!(n.func==t&&n.owner==e)}))},n.Notify=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._callbacks.map((function(t){t.func.bind(t.owner).apply(void 0,e)}))},n.Clear=function(){this._callbacks=[]},e(t,[{key:"Length",get:function(){return this._callbacks.length}}]),t}());var r=[];n._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts"],(function(e){var t,i,r,n,a,l,s,o,u,h,p,c,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,s=e.SpriteFrame,o=e.sp,u=e.AudioClip,h=e.randomRangeInt,p=e.Color,c=e.Component},function(e){f=e.shuffle}],execute:function(){var y,m,d,b,g,k,S,I,L,_,v,D,x,z,C,F,H,w,T,A,O,E,R,M,P,G,B,W,j,X,Y,q,K,N,J;a._RF.push({},"3fe73KWfqxM4LxXjzpExRzT","DataManager",void 0);var Q=l.ccclass,U=l.property,V=e("default",(v=Q("DataItem"),D=U({type:s,visible:!0}),x=U({type:s,visible:!0}),z=U({type:s,visible:!0}),C=U({type:s,visible:!0}),F=U({type:o.SkeletonData,visible:!0}),H=U({type:o.SkeletonData,visible:!0}),w=U({visible:!0}),T=U({visible:!0}),A=U({visible:!0}),O=U({visible:!0}),E=U(u),v((P=t((M=function(){i(this,"characterSpriteFrame",P,this),i(this,"characterDarkerSpriteFrame",G,this),i(this,"headIconSpriteFrame",B,this),i(this,"nameSpriteFrame",W,this),i(this,"characterSpineData",j,this),i(this,"skillSkeletonData",X,this),i(this,"skillRedToken",Y,this),i(this,"skillBlueToken",q,this),i(this,"skillGreenToken",K,this),i(this,"skillDamage",N,this),i(this,"skillAudio",J,this)}).prototype,"characterSpriteFrame",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(M.prototype,"characterDarkerSpriteFrame",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(M.prototype,"headIconSpriteFrame",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(M.prototype,"nameSpriteFrame",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(M.prototype,"characterSpineData",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(M.prototype,"skillSkeletonData",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(M.prototype,"skillRedToken",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=t(M.prototype,"skillBlueToken",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),K=t(M.prototype,"skillGreenToken",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=t(M.prototype,"skillDamage",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),J=t(M.prototype,"skillAudio",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=M))||R));e("DataManager",(y=Q("DataManager"),m=U({type:[V],visible:!0}),d=U({visible:!1}),b=U({visible:!1}),y(((_=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"_dataList",S,n(t)),i(t,"playerList",I,n(t)),i(t,"enemyList",L,n(t)),t._playerIndex=-1,t._enemyIndex=-1,t}r(t,e);var a=t.prototype;return a.randomAllCards=function(){for(var e=[],t=0;t<50;t++){var i=h(0,105);i<21?e.push(1):i<42?e.push(2):i<63?e.push(3):i<77?e.push(4):i<91?e.push(5):i<98?e.push(6):i<105&&e.push(7)}return e},a.randomCharacter=function(){this.playerList=[],this.enemyList=[],this._playerIndex=-1,this._enemyIndex=-1;for(var e=[],t=0;t<this._dataList.length;t++)e.push(t);for(var i=f(e),r=0;r<3;r++)r<i.length&&this.playerList.push(i[r]);for(var n=3;n<i.length;n++)this.enemyList.push(i[n])},a.nextPlayerCharacter=function(){return this._playerIndex+=1,this.playerList[this._playerIndex]},a.nextEnemyCharacter=function(){return this._enemyIndex+=1,this.enemyList[this._enemyIndex]},a.getCharacterSprite=function(e){return this._dataList[e].characterSpriteFrame},a.getDarkerCharacterSprite=function(e){return this._dataList[e].characterDarkerSpriteFrame},a.getNameSprite=function(e){return this._dataList[e].nameSpriteFrame},a.getCharacterSpine=function(e){return this._dataList[e].characterSpineData},a.getSkillSkeletonData=function(e){return this._dataList[e].skillSkeletonData},a.getSkillTokens=function(e){return[this._dataList[e].skillRedToken,this._dataList[e].skillBlueToken,this._dataList[e].skillGreenToken]},a.getSkillDamage=function(e){return this._dataList[e].skillDamage},a.getSkillAudio=function(e){return this._dataList[e].skillAudio},a.getOtherHeadIconSprite=function(e){return e?this.getPlayerOtherHeadIconSprite():this.getEnemyOtherHeadIconSprite()},a.getOtherHeadIconColor=function(e){return e?this.getPlayerOtherHeadIconColor():this.getEnemyOtherHeadIconColor()},a.getPlayerOtherHeadIconSprite=function(){for(var e=[],t=0;t<this.playerList.length;t++){var i=this.playerList[t];t!=this._playerIndex&&e.push(this.getHeadIconSprite(i))}return e},a.getPlayerOtherHeadIconColor=function(){for(var e=[],t=0;t<this.playerList.length;t++)t<this._playerIndex?e.push(p.GRAY):t>this._playerIndex&&e.push(p.WHITE);return e},a.getEnemyOtherHeadIconSprite=function(){for(var e=[],t=0;t<this.enemyList.length;t++){var i=this.enemyList[t];t!=this._enemyIndex&&e.push(this.getHeadIconSprite(i))}return e},a.getEnemyOtherHeadIconColor=function(){for(var e=[],t=0;t<this.enemyList.length;t++)t<this._enemyIndex?e.push(p.GRAY):t>this._enemyIndex&&e.push(p.WHITE);return e},a.getHeadIconSprite=function(e){return this._dataList[e].headIconSpriteFrame},t}(c)).LIFE_MAX=3,S=t((k=_).prototype,"_dataList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(k.prototype,"playerList",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(k.prototype,"enemyList",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=k))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Canvas,g=t.UITransform,h=t.instantiate,p=t.Label,c=t.Color,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[c.WHITE,c.BLACK,c.RED,c.GREEN,c.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(a)){var t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=h(s);l.parent=this.node,l.name="Buttons";var r=h(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=h(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(p);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=c.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?h(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=S;var x=h(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=h(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=h(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?h(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/FightBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./FightBoxSite.ts","./SourceManager.ts"],(function(e){var i,t,n,r,o,a,l,s,u,p,c,b,y,_,h,f,g,w,x,m;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.createClass,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,p=e.Sprite,c=e.Node,b=e.Label,y=e.Animation,_=e.math,h=e.Component,f=e.Vec3},function(e){g=e.WaitForSeconds},function(e){w=e.FightBoxSite},function(e){x=e.SourceManager,m=e.BoxType}],execute:function(){var L,v,P,B,d,S,T,z,R,F,C,k,E,M,A,D,I,V,G,N,U,W,j;s._RF.push({},"6c602TzgzdJy60Qpfk6gv9U","FightBox",void 0);var H=u.ccclass,J=u.property;e("FightBox",(L=H("FightBox"),v=J({type:p,visible:!0}),P=J({type:w,visible:!0}),B=J({type:w,visible:!0}),d=J({type:c,visible:!0}),S=J({type:c,visible:!0}),T=J({type:b,visible:!0}),z=J({type:b,visible:!0}),R=J({type:c,visible:!0}),F=J({type:b,visible:!0}),C=J({type:y,visible:!0}),L((M=i((E=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return i=e.call.apply(e,[this].concat(n))||this,r(i,"_boxTypeSprite",M,o(i)),r(i,"_siteL",A,o(i)),r(i,"_siteR",D,o(i)),r(i,"_playerBox",I,o(i)),r(i,"_enemyBox",V,o(i)),r(i,"_playerPointLabel",G,o(i)),r(i,"_enemyPointLabel",N,o(i)),r(i,"_winBox",U,o(i)),r(i,"_winPointLabel",W,o(i)),r(i,"_winAnimation",j,o(i)),i._boxType=m.VS,i}t(i,e);var s=i.prototype;return s.init=function(e,i){this._boxType=i,this._boxTypeSprite.spriteFrame=x.Instance.getBoxTypeSprite(i),this._siteL.group=e,this._siteR.group=e,this._siteL.point=-1,this._siteR.point=-1,this._siteL.closeCollider(),this._siteR.closeCollider(),this._winBox.active=!1,this._winPointLabel.string="",this._playerPointLabel.string="",this._enemyPointLabel.string=""},s.reset=function(e){this._boxType=e,this._boxTypeSprite.spriteFrame=x.Instance.getBoxTypeSprite(e),this._siteL.point=-1,this._siteR.point=-1,this._siteL.closeCollider(),this._siteR.closeCollider(),this._winBox.active=!1,this._winPointLabel.string="",this._playerPointLabel.string="",this._enemyPointLabel.string=""},s.waitForPlayeMoved=function(){this._siteL.waitForPlayerMoveCard(),this._siteR.waitForPlayerMoveCard()},s.showPlayerPoint=function(e){this._playerPointLabel.string=e.toString()},s.showEnemyPoint=function(e){this._enemyPointLabel.string=e.toString()},s.doShowWinner=function(){var e=a(l().mark((function e(i){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new f(i?this._playerBox.worldPosition:this._enemyBox.worldPosition),n=i?-180:180,r=new f(t.x,t.y+n,t.z),this._winBox.active=!0,this._winBox.worldPosition=t,this._winPointLabel.string=i?this._playerPointLabel.string:this._enemyPointLabel.string,this._winAnimation.play(),e.next=9,g(.1);case 9:return e.abrupt("return",[t,r]);case 10:case"end":return e.stop()}}),e,this)})));return function(i){return e.apply(this,arguments)}}(),s.getBoxType=function(){var e=this._boxType;if(this._boxType==m.VS)switch(_.randomRangeInt(0,3)){case 0:e=m.RED;break;case 1:e=m.BLUE;break;case 2:e=m.GREEN;break;default:e=m.RED}return e},n(i,[{key:"originBoxType",get:function(){return this._boxType}}]),i}(h)).prototype,"_boxTypeSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(E.prototype,"_siteL",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(E.prototype,"_siteR",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(E.prototype,"_playerBox",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(E.prototype,"_enemyBox",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(E.prototype,"_playerPointLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(E.prototype,"_enemyPointLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(E.prototype,"_winBox",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(E.prototype,"_winPointLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(E.prototype,"_winAnimation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=E))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/FightBoxSite.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,o,n,l,c,a;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,c=e.BoxCollider2D,a=e.Component}],execute:function(){var s,u,p,d,h;n._RF.push({},"a4daaHm3cdHiJyu2nLzEebI","FightBoxSite",void 0);var f=l.ccclass,y=l.property;e("FightBoxSite",(s=f("FightBoxSite"),u=y({type:c,visible:!0}),s((h=i((d=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return i=e.call.apply(e,[this].concat(n))||this,r(i,"_collider",h,o(i)),i.group=-1,i.point=-1,i}t(i,e);var n=i.prototype;return n.waitForPlayerMoveCard=function(){this._collider.enabled=!0,this.point=-1},n.closeCollider=function(){this._collider.enabled=!1},n.cardPushed=function(e){this.point=e},i}(a)).prototype,"_collider",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Common.ts","./SpriteSwitcher.ts","./AudioManager.ts","./BattleSystem.ts","./Card.ts","./CardManager.ts","./CharacterManager.ts","./DataManager.ts","./FightBox.ts","./FightBoxSite.ts","./MainSystem.ts","./PlayerInfo.ts","./RevealManager.ts","./SourceManager.ts","./TableManager.ts","./TutorialManager.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./SourceManager.ts","./AudioManager.ts","./CardManager.ts","./DataManager.ts","./RevealManager.ts","./TutorialManager.ts","./BattleSystem.ts"],(function(t){var e,n,i,r,a,o,s,u,l,c,p,h,f,b,_,d,y,m,v,g,w,M,A,C,B,S,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t._decorator,l=t.Animation,c=t.Button,p=t.Node,h=t.Label,f=t.game,b=t.Director,_=t.randomRangeInt,d=t.log,y=t.Component},function(t){m=t.WaitForSeconds,v=t.WaitForUntil},function(t){g=t.SourceManager,w=t.WinnerType},function(t){M=t.AudioManager},function(t){A=t.CardManager},function(t){C=t.DataManager},function(t){B=t.RevealManager},function(t){S=t.TutorialManager},function(t){k=t.BattleSystem}],execute:function(){var x,z,I,T,L,N,E,F,W,R,D,G,O,V,P,U,H,Y,j,q,J,K,Q,X,Z,$,tt,et,nt,it,rt,at,ot;s._RF.push({},"1bd9aV/tptAlrbwtcuhLdpC","MainSystem",void 0);var st=u.ccclass,ut=u.property;t("MainSystem",(x=st("MainSystem"),z=ut({type:k,visible:!0}),I=ut({type:A,visible:!0}),T=ut({type:A,visible:!0}),L=ut({type:C,visible:!0}),N=ut({type:B,visible:!0}),E=ut({type:S,visible:!0}),F=ut({type:l,visible:!0}),W=ut({type:l,visible:!0}),R=ut({type:l,visible:!0}),D=ut({type:c,visible:!0}),G=ut({type:c,visible:!0}),O=ut({type:c,visible:!0}),V=ut({type:p,visible:!0}),P=ut({type:h,visible:!0}),U=ut({type:c,visible:!0}),x((j=e((Y=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"_battleSystem",j,r(e)),i(e,"_playerCardManager",q,r(e)),i(e,"_enemyCardManager",J,r(e)),i(e,"_dataManager",K,r(e)),i(e,"_revealManager",Q,r(e)),i(e,"_tutorialManager",X,r(e)),i(e,"_victoryAnim",Z,r(e)),i(e,"_tieAnim",$,r(e)),i(e,"_looseAnim",tt,r(e)),i(e,"_winButton",et,r(e)),i(e,"_tieButton",nt,r(e)),i(e,"_looseButton",it,r(e)),i(e,"_betNode",rt,r(e)),i(e,"_betLabel",at,r(e)),i(e,"_testButton",ot,r(e)),e._bet=0,e}n(e,t);var s=e.prototype;return s.onLoad=function(){f.emit("game_scene_loaded")},s.start=function(){b.EVENT_BEFORE_SCENE_LAUNCH,this.init()},s.init=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._victoryAnim.node.active=!1,this._tieAnim.node.active=!1,this._looseAnim.node.active=!1,this._winButton.node.active=!1,this._testButton.node.active=!1,this._revealManager.node.active=!1,this._tutorialManager.node.active=!1,this._betNode.active=!1,this._tutorialManager.init(),g.Instance.hideTip(),t.next=12,M.inst.prepare();case 12:this.process();case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onClickTest=function(){},s.retry=function(){this.resetAll(),this.startGame()},s.resetAll=function(){this._victoryAnim.node.active=!1,this._winButton.node.active=!1,this._tieAnim.node.active=!1,this._looseAnim.node.active=!1,this._winButton.node.active=!1,this._testButton.node.active=!1,this._revealManager.node.active=!1,this._tutorialManager.node.active=!1,this._betNode.active=!1,g.Instance.hideTip(),this._battleSystem.resetAll()},s.process=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.prepare(),this.showCharacters();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.prepare=function(){this._bet=Number(localStorage.getItem("bet")),0==this._bet&&(this._bet=_(1,10));var t=localStorage.getItem("myCards");if(null==t||0==t.length){d("[FAIL]無法取得卡片, 自動生成");var e=this._dataManager.randomAllCards();this._playerCardManager.init(e)}else{d("[SUCCESS]取得卡片");var n=t.split(",").map(Number);this._playerCardManager.init(n)}this._enemyCardManager.init(this._dataManager.randomAllCards()),this._dataManager.randomCharacter()},s.showCharacters=function(){var t=a(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this._dataManager.playerList,this._revealManager.show(e);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onClickShowCharacter=function(){this._revealManager.node.active=!1,this.showInfo()},s.showInfo=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.Instance.eventTarget.once("tutorial_end",this.startGame.bind(this)),this._tutorialManager.show();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.startGame=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._tutorialManager.node.active=!1,M.inst.playMusic(g.Instance.getAudioClip("music"),.5),this._battleSystem.prepare(),this._battleSystem.startGame(),t.next=6,this.waitForBattleFinished();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.waitForBattleFinished=function(){var t=a(o().mark((function t(){var e=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v((function(t){return 1==e._battleSystem.finished}));case 2:return this._battleSystem.finalWinner==w.PLAYER?this.showVictory():this._battleSystem.finalWinner==w.ENEMY?this.showLose():this.showTie(),t.next=5,m(.25);case 5:this._battleSystem.resetAll();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.showVictory=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._victoryAnim.node.active=!0,this._victoryAnim.play(),M.inst.playOneShot(g.Instance.getAudioClip("victory")),t.next=5,m(this._victoryAnim.defaultClip.duration);case 5:M.inst.playMusic(g.Instance.getAudioClip("victory_music"),.75),this.showBetNode(2*this._bet),this._winButton.node.active=!0,this._winButton.interactable=!0;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.showTie=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._tieAnim.node.active=!0,this._tieAnim.play(),t.next=4,m(this._tieAnim.defaultClip.duration);case 4:this._tieButton.node.active=!0,this._tieButton.interactable=!0;case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.showLose=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._looseAnim.node.active=!0,this._looseAnim.play(),t.next=4,m(this._looseAnim.defaultClip.duration);case 4:this.showBetNode(-this._bet),this._looseButton.node.active=!0,this._looseButton.interactable=!0;case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.showBetNode=function(t){this._betNode.active=!0,this._betLabel.string=t<0?""+t:"+"+t},s.onClickWinButton=function(){M.inst.playOneShot(g.Instance.getAudioClip("click_button")),this._winButton.interactable=!1,this.postMessageToWebpage("win")},s.onClickTieButton=function(){M.inst.playOneShot(g.Instance.getAudioClip("click_button")),this._winButton.interactable=!1,this.postMessageToWebpage("draw")},s.onClickLooseButton=function(){M.inst.playOneShot(g.Instance.getAudioClip("click_button")),this.postMessageToWebpage("lose")},s.postMessageToWebpage=function(t){window.parent.postMessage({messageId:"gameEnded",result:t},"*")},e}(y)).prototype,"_battleSystem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(Y.prototype,"_playerCardManager",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(Y.prototype,"_enemyCardManager",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(Y.prototype,"_dataManager",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(Y.prototype,"_revealManager",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(Y.prototype,"_tutorialManager",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(Y.prototype,"_victoryAnim",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(Y.prototype,"_tieAnim",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(Y.prototype,"_looseAnim",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(Y.prototype,"_winButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(Y.prototype,"_tieButton",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(Y.prototype,"_looseButton",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(Y.prototype,"_betNode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(Y.prototype,"_betLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(Y.prototype,"_testButton",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=Y))||H));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SourceManager.ts","./DataManager.ts","./Common.ts"],(function(e){var n,t,i,r,o,l,s,a,c,u,k,h,_,b,f,T,p,d,g,y;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.createClass,r=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,u=e.Sprite,k=e.Label,h=e.Node,_=e.log,b=e.Component,f=e.Color,T=e.tween},function(e){p=e.BoxType,d=e.SourceManager},function(e){g=e.DataManager},function(e){y=e.WaitForSeconds}],execute:function(){var L,I,S,m,v,w,D,U,C,E,z,F,N,P,R,M,B,x,G;a._RF.push({},"40982dr6btPv7GUKpwU6p0S","PlayerInfo",void 0);var H=c.ccclass,A=c.property;e("PlayerInfo",(L=H("PlayerInfo"),I=A({type:u,visible:!0}),S=A({type:u,visible:!0}),m=A({type:[u],visible:!0}),v=A({type:k,visible:!0}),w=A({type:k,visible:!0}),D=A({type:k,visible:!0}),U=A({type:h,visible:!0}),C=A({type:k,visible:!0}),L((F=n((z=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];return n=e.call.apply(e,[this].concat(i))||this,r(n,"_headIcon1",F,o(n)),r(n,"_headIcon2",N,o(n)),r(n,"_lifeIconsList",P,o(n)),r(n,"_redTokenLabel",R,o(n)),r(n,"_blueTokenLabel",M,o(n)),r(n,"_greenTokenLabel",B,o(n)),r(n,"_cardDeckNode",x,o(n)),r(n,"_cardDeckCountLabel",G,o(n)),n._life=3,n._redToken=0,n._blueToken=0,n._greenToken=0,n._redSkillToken=0,n._blueSkillToken=0,n._greenSkillToken=0,n}t(n,e);var a=n.prototype;return a.setSkillTokenCount=function(e,n,t){this._redSkillToken=e,this._blueSkillToken=n,this._greenSkillToken=t,this.setTokenUI()},a.setHeadIcon=function(e,n,t,i){this._headIcon1.spriteFrame=e,this._headIcon2.spriteFrame=n,this._headIcon1.color=t,this._headIcon2.color=i},a.setCardDeckCount=function(e){this._cardDeckCountLabel.string=e.toString()},a.reset=function(){this._life=g.LIFE_MAX,this._redToken=0,this._blueToken=0,this._greenToken=0,this.setLifeUI(),this.setTokenUI()},a.checkTokenCount=function(e,n){switch(e){case p.RED:return this._redToken>=n;case p.BLUE:return this._blueToken>=n;case p.GREEN:return this._greenToken>=n}return!1},a.addToken=function(e,n){switch(_("addToken "+e+" : "+n),e){case p.RED:this._redToken+=n,this._redToken<0&&(this._redToken=0);break;case p.BLUE:this._blueToken+=n,this._blueToken<0&&(this._blueToken=0);break;case p.GREEN:this._greenToken+=n,this._greenToken<0&&(this._greenToken=0)}},a.playChangeTokenValueAnim=function(){var e=l(s().mark((function e(n){var t,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setTokenUI(),t=.25,e.t0=n,e.next=e.t0===p.BLUE?5:e.t0===p.GREEN?7:9;break;case 5:return i=T(this._blueTokenLabel),e.abrupt("break",11);case 7:return i=T(this._greenTokenLabel),e.abrupt("break",11);case 9:return i=T(this._redTokenLabel),e.abrupt("break",11);case 11:return i.to(t,{color:new f(255,255,0,255)}).delay(t).to(t,{color:new f(255,255,255,255)}).start(),e.next=14,y(2.5*t);case 14:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),a.changeLifeValue=function(e){this._life+=e,this._life<=0&&(this._life=0),this.setLifeUI()},a.checkSkillTokenBeMet=function(){return this._redToken>=this._redSkillToken&&this._blueToken>=this._blueSkillToken&&this._greenToken>=this._greenSkillToken},a.costSkillToken=function(){this._redToken-=this._redSkillToken,this._blueToken-=this._blueSkillToken,this._greenToken-=this._greenSkillToken,this.setTokenUI()},a.setLifeUI=function(){for(var e=0;e<this._lifeIconsList.length;e++)this._lifeIconsList[e].node.active=e<this._life;this._life<=1?this._lifeIconsList[0].spriteFrame=d.Instance.hpDangerSpriteFrame:this._lifeIconsList[0].spriteFrame=d.Instance.hpHealthingSpriteFrame},a.setTokenUI=function(){this._redTokenLabel.string=this._redToken+"/"+this._redSkillToken,this._blueTokenLabel.string=this._blueToken+"/"+this._blueSkillToken,this._greenTokenLabel.string=this._greenToken+"/"+this._greenSkillToken},i(n,[{key:"isNoHp",get:function(){return this._life<=0}},{key:"hp",get:function(){return this._life}},{key:"cardDeckPosition",get:function(){return this._cardDeckNode.position}}]),n}(b)).prototype,"_headIcon1",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(z.prototype,"_headIcon2",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(z.prototype,"_lifeIconsList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=n(z.prototype,"_redTokenLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(z.prototype,"_blueTokenLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(z.prototype,"_greenTokenLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(z.prototype,"_cardDeckNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(z.prototype,"_cardDeckCountLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=z))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/RevealManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataManager.ts","./Common.ts"],(function(e){var t,r,a,i,n,c,o,s,u,l,h,p,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){o=e.cclegacy,s=e._decorator,u=e.Sprite,l=e.Animation,h=e.Node,p=e.Component},function(e){f=e.DataManager},function(e){g=e.WaitForSeconds}],execute:function(){var _,b,v,y,d,m,L,x,M,k,w,C,z;o._RF.push({},"0cc405IHMNHJ7LuLS7GNMcx","RevealManager",void 0);var A=s.ccclass,R=s.property;e("RevealManager",(_=A("RevealManager"),b=R({type:f,visible:!0}),v=R({type:[u],visible:!0}),y=R({type:[u],visible:!0}),d=R({type:[l],visible:!0}),m=R({type:h,visible:!0}),_((M=t((x=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return t=e.call.apply(e,[this].concat(n))||this,a(t,"_dataManager",M,i(t)),a(t,"_darkCharacterList",k,i(t)),a(t,"_characterList",w,i(t)),a(t,"_characterAnimList",C,i(t)),a(t,"_nextButton",z,i(t)),t}return r(t,e),t.prototype.show=function(){var e=n(c().mark((function e(t){var r,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.node.active=!0,this._nextButton.active=!1,this.node.active=!0,r=0;r<t.length;r++)r<this._darkCharacterList.length&&(this._darkCharacterList[r].spriteFrame=this._dataManager.getDarkerCharacterSprite(t[r])),r<this._characterList.length&&(this._characterList[r].spriteFrame=this._dataManager.getCharacterSprite(t[r]));return e.next=6,g(.5);case 6:a=this._characterAnimList[0].defaultClip.duration,i=0;case 8:if(!(i<t.length)){e.next=16;break}if(!(i<this._characterAnimList.length)){e.next=13;break}return this._characterAnimList[i].play(),e.next=13,g(.5*a);case 13:i++,e.next=8;break;case 16:return e.next=18,g(.5*a);case 18:this._nextButton.active=!0;case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(p)).prototype,"_dataManager",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(x.prototype,"_darkCharacterList",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(x.prototype,"_characterList",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(x.prototype,"_characterAnimList",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(x.prototype,"_nextButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=x))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/SourceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,a,o,u,p,l,c,s,f,b,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.createClass,a=e.assertThisInitialized},function(e){o=e.cclegacy,u=e._decorator,p=e.AudioClip,l=e.Prefab,c=e.SpriteFrame,s=e.Sprite,f=e.UITransform,b=e.EventTarget,m=e.Component}],execute:function(){var S,g,h,L,d,F,y,E,w,B,k,z,R,_,v,I,T,C,D,x,A,M,P,N,H,U,V,G,W,Y,X,j,J,K,Q;o._RF.push({},"692afrlwQVJibDR+V0KL6/S","SourceManager",void 0);var q=u.ccclass,O=u.property,Z=e("default",(W=q("AudioMap"),Y=O({visible:!0}),X=O(p),W((K=t((J=function(){i(this,"key",K,this),i(this,"audioClip",Q,this)}).prototype,"key",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Q=t(J.prototype,"audioClip",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=J))||j)),$=(e("SourceManager",(S=q("SourceManager"),g=O(l),h=O(c),L=O([c]),d=O([c]),F=O([c]),y=O([c]),E=O([c]),w=O(c),B=O(c),k=O({type:s,visible:!0}),z=O([c]),R=O([Z]),S(((G=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,i(t,"cardPrefab",I,a(t)),i(t,"backSpriteFrame",T,a(t)),i(t,"frontSpriteFrameList",C,a(t)),i(t,"fightBoxBgSpriteFrameList",D,a(t)),i(t,"tokenSpriteFrameList",x,a(t)),i(t,"roundInfoSpriteFrameList",A,a(t)),i(t,"roundHeaderSpriteFrameList",M,a(t)),i(t,"hpHealthingSpriteFrame",P,a(t)),i(t,"hpDangerSpriteFrame",N,a(t)),i(t,"_tipSprite",H,a(t)),i(t,"skillTipSpriteFrameList",U,a(t)),i(t,"audioClipList",V,a(t)),t.eventTarget=new b,t}r(t,e);var o=t.prototype;return o.onLoad=function(){t._instance=this},o.getAudioClip=function(e){var t=this.audioClipList.find((function(t){return t.key==e}));return null!=t?t.audioClip:null},o.getBoxTypeSprite=function(e){switch(e){case $.RED:return t.Instance.fightBoxBgSpriteFrameList[0];case $.BLUE:return t.Instance.fightBoxBgSpriteFrameList[1];case $.GREEN:return t.Instance.fightBoxBgSpriteFrameList[2];case $.VS:return t.Instance.fightBoxBgSpriteFrameList[3]}},o.getTokenSprite=function(e){switch(e){case $.RED:return t.Instance.tokenSpriteFrameList[0];case $.BLUE:return t.Instance.tokenSpriteFrameList[1];case $.GREEN:return t.Instance.tokenSpriteFrameList[2];default:return t.Instance.tokenSpriteFrameList[0]}},o.showTip=function(e,t){this._tipSprite.spriteFrame=this.skillTipSpriteFrameList[e],this._tipSprite.node.setWorldPosition(t),t.x<900?this._tipSprite.node.getComponent(f).anchorX=0:this._tipSprite.node.getComponent(f).anchorX=1,this._tipSprite.node.active=!0},o.hideTip=function(){this._tipSprite.node.active=!1},n(t,null,[{key:"Instance",get:function(){return this._instance}}]),t}(m))._instance=null,I=t((v=G).prototype,"cardPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(v.prototype,"backSpriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(v.prototype,"frontSpriteFrameList",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(v.prototype,"fightBoxBgSpriteFrameList",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(v.prototype,"tokenSpriteFrameList",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=t(v.prototype,"roundInfoSpriteFrameList",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(v.prototype,"roundHeaderSpriteFrameList",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=t(v.prototype,"hpHealthingSpriteFrame",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(v.prototype,"hpDangerSpriteFrame",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(v.prototype,"_tipSprite",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(v.prototype,"skillTipSpriteFrameList",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=t(v.prototype,"audioClipList",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=v))||_)),e("WinnerType",function(e){return e[e.DRAW=0]="DRAW",e[e.PLAYER=1]="PLAYER",e[e.ENEMY=2]="ENEMY",e}({})),e("BoxType",function(e){return e[e.RED=0]="RED",e[e.GREEN=1]="GREEN",e[e.BLUE=2]="BLUE",e[e.VS=3]="VS",e}({})));o._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteSwitcher.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,p,o,s,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,r=t.inheritsLoose,n=t.assertThisInitialized},function(t){p=t.cclegacy,o=t._decorator,s=t.SpriteFrame,l=t.Sprite,u=t.Component}],execute:function(){var a,c,h,f,y,S,m,b,v,_,g,w;p._RF.push({},"ad5166HiI5Nj6jKlnkTv5cy","SpriteSwitcher",void 0);var d=o.ccclass,F=o.property,k=t("default",(S=d("SpriteSwitcherItem"),m=F({visible:!0}),b=F(s),S((g=e((_=function(){i(this,"key",g,this),i(this,"sprite",w,this)}).prototype,"key",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=e(_.prototype,"sprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=_))||v));t("SpriteSwitcher",(a=d("SpriteSwitcher"),c=F({type:[k],visible:!0}),a((y=e((f=function(t){function e(){for(var e,r=arguments.length,p=new Array(r),o=0;o<r;o++)p[o]=arguments[o];return e=t.call.apply(t,[this].concat(p))||this,i(e,"_spriteList",y,n(e)),e._mySprite=null,e}r(e,t);var p=e.prototype;return p.getSpriteFrame=function(t){var e=this._spriteList.find((function(e){return e.key==t}));return null!=e?e.sprite:null},p.setSprite=function(t){null==this._mySprite&&(this._mySprite=this.getComponent(l)),this._mySprite.spriteFrame=this.getSpriteFrame(t)},e}(u)).prototype,"_spriteList",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=f))||h));p._RF.pop()}}}));

System.register("chunks:///_virtual/TableManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FightBox.ts","./Common.ts","./SourceManager.ts","./AudioManager.ts"],(function(e){var t,n,i,o,r,s,a,c,u,p,l,h,f,b,y,d,_,x,w,g,v,L,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.createForOfIteratorHelperLoose,o=e.createClass,r=e.initializerDefineProperty,s=e.assertThisInitialized,a=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){u=e.cclegacy,p=e._decorator,l=e.Sprite,h=e.Node,f=e.Component,b=e.Vec3,y=e.tween,d=e.Color},function(e){_=e.FightBox},function(e){x=e.shuffle,w=e.WaitForSeconds},function(e){g=e.BoxType,v=e.WinnerType,L=e.SourceManager},function(e){m=e.AudioManager}],execute:function(){var T,P,I,B,W,S,E,k,N,F,M;u._RF.push({},"87e3d+DWmBI7o0FeP1x03ew","TableManager",void 0);var R=p.ccclass,A=p.property;e("TableManager",(T=R("TableManager"),P=A({type:[_],visible:!0}),I=A({type:[l],visible:!0}),B=A({type:l,visible:!0}),W=A({type:[h],visible:!0}),T((k=t((E=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"_boxList",k,s(t)),r(t,"_winIconList",N,s(t)),r(t,"_compareWinNode",F,s(t)),r(t,"_enemySiteList",M,s(t)),t.BOX_TYPE_PROBABILITY=[g.RED,g.BLUE,g.GREEN,g.RED,g.BLUE,g.GREEN,g.VS],t._boxTypeProbabilityList=[],t}n(t,e);var u=t.prototype;return u.start=function(){this.init()},u.init=function(){for(var e=0;e<this._boxList.length;e++)this._boxList[e].init(e,this.randomBoxType());this.initWinIcons()},u.reset=function(){this._boxTypeProbabilityList=[];for(var e=0;e<this._boxList.length;e++)this._boxList[e].reset(this.randomBoxType());this.initWinIcons()},u.randomBoxType=function(){return 0==this._boxTypeProbabilityList.length?this._boxTypeProbabilityList=[].concat(x(this.BOX_TYPE_PROBABILITY)):x(this._boxTypeProbabilityList),this._boxTypeProbabilityList.pop()},u.waitForPlayeMoved=function(){for(var e=0;e<this._boxList.length;e++)this._boxList[e].waitForPlayeMoved()},u.getEnemyCardSitePos=function(){for(var e=[],t=0;t<this._enemySiteList.length;t++)e.push(this._enemySiteList[t].worldPosition);return e},u.setBoxPoints=function(){var e=a(c().mark((function e(t,n,i,o){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this._boxList[t]).showPlayerPoint(i),r.showEnemyPoint(o);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),u.checkBoxType=function(e){return this._boxList[e].getBoxType()},u.showWinnerIconAndToken=function(){var e=a(c().mark((function e(t,n,i){var o,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this._boxList[t],n==v.DRAW){e.next=7;break}return e.next=4,o.doShowWinner(n==v.PLAYER);case 4:return r=e.sent,e.next=7,this.doTweenWinIcon(t,i,r[0],r[1]);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),u.checkTargetBoxTypeIsVs=function(e){return e>=0&&e<this._boxList.length&&this._boxList[e].originBoxType==g.VS},u.initWinIcons=function(){for(var e,t=i(this._winIconList);!(e=t()).done;){e.value.node.active=!1}this._compareWinNode.node.active=!1},u.doTweenWinIcon=function(){var e=a(c().mark((function e(t,n,i,o){var r,s,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._winIconList[t],s=new b(i.x,.5*(o.y-i.y)+i.y,i.z),r.spriteFrame=L.Instance.getTokenSprite(n),r.node.setWorldPosition(i),r.color.set(255,255,255,100),r.node.scale.set(.8,.8,.8),a=.25,r.node.active=!0,y(r.node).to(a,{scale:new b(1.2,1.2,1),worldPosition:s},{easing:"cubicInOut"}).to(a,{scale:new b(1,1,1),worldPosition:o}).start(),y(r).to(a,{color:new d(255,255,255,255)}).start(),m.inst.playOneShot(L.Instance.getAudioClip("win_icon")),e.next=13,w(.5);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),u.doTweenCompareWinIcon=function(){var e=a(c().mark((function e(t,n){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._compareWinNode.spriteFrame=L.Instance.getTokenSprite(t),this._compareWinNode.node.setPosition(n),this._compareWinNode.node.scale.set(.8,.8,.8),i=.25,this._compareWinNode.node.active=!0,y(this._compareWinNode.node).to(i,{scale:new b(1.5,1.5,1)},{easing:"cubicInOut"}).to(i,{scale:new b(1.2,1.2,1)}).start(),m.inst.playOneShot(L.Instance.getAudioClip("win_icon")),e.next=9,w(1.5);case 9:this._compareWinNode.node.active=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),o(t,[{key:"fightBoxCount",get:function(){return this._boxList.length}}]),t}(f)).prototype,"_boxList",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=t(E.prototype,"_winIconList",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=t(E.prototype,"_compareWinNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(E.prototype,"_enemySiteList",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=E))||S));u._RF.pop()}}}));

System.register("chunks:///_virtual/TutorialManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SourceManager.ts"],(function(t){var e,i,a,n,r,o,s,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Node,u=t.Component},function(t){p=t.SourceManager}],execute:function(){var c,l,g,h,_,v,f,b,y;r._RF.push({},"f81dba1+55Id7K/XQ3h/Tr/","TutorialManager",void 0);var L=o.ccclass,d=o.property;t("TutorialManager",(c=L("TutorialManager"),l=d({type:[s],visible:!0}),g=d({type:s,visible:!0}),h=d({type:s,visible:!0}),c((f=e((v=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"_pageList",f,n(e)),a(e,"_previousButton",b,n(e)),a(e,"_nextButton",y,n(e)),e._totalPage=2,e._page=0,e}i(e,t);var r=e.prototype;return r.init=function(){for(var t=0;t<this._pageList.length;t++)this._pageList[t].active=!1;this.node.active=!1},r.show=function(){this._previousButton.active=!1,this._nextButton.active=!0,this._totalPage=this._pageList.length,this._page=0,this.node.active=!0,this._pageList[this._page].active=!0},r.onClickNext=function(){this._page+=1,this._page>=this._totalPage?p.Instance.eventTarget.emit("tutorial_end"):(this._pageList[this._page-1].active=!1,this._pageList[this._page].active=!0,this._page>0&&(this._previousButton.active=!0))},r.onClickPrevious=function(){this._page-=1,this._page<0&&(this._page=0),this._pageList[this._page+1].active=!1,this._pageList[this._page].active=!0,0==this._page&&(this._previousButton.active=!1)},e}(u)).prototype,"_pageList",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=e(v.prototype,"_previousButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(v.prototype,"_nextButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=v))||_));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});